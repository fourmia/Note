<!--
 * @Author: LiZedong 15516926476@163.com
 * @Date: 2022-07-22 16:11:36
 * @LastEditors: LiZedong 15516926476@163.com
 * @LastEditTime: 2022-07-27 18:10:46
 * @FilePath: \A个人笔记\操作系统相关\30天自制操作系统.md
 * @Description: 
 * 
 * Copyright (c) 2022 by LiZedong 15516926476@163.com, All Rights Reserved. 
-->
### 典型操作系统架构
![20220727120937](https://raw.githubusercontent.com/fourmia/Picture/main/20220727120937.png)
### 操作系统加载过程
以windows系统为例，计算机在开启电源后，运行基本输入输出系统`BIOS`(由硬件电路加载)，完成一些简单的检测及初始化工作并建立中断向量表，然后将处理器使用权移交给主引导记录`MBR`（约定MBR位于整个硬盘最开始的扇区0盘0道1扇区），对0盘0道1扇区内容进行检查，若此扇区末尾两个字节分别为0x55，0xaa，则认为此扇区存在MBR，将扇区内容加载到物理内存0x7c00运行，MBR里存储了引导程序和分区表以及结束标志，分区表里操作系统所在分区为活动分区，对应的MBR中的分区表项为0x80,否则为0，找到活动分区后，将CPU使用权交给此分区上的引导程序（内核加载器）.

![20220726114428](https://raw.githubusercontent.com/fourmia/Picture/main/20220726114428.png)

BIOS -> MBR -> OSLoader -> OS
![20220722181722](https://raw.githubusercontent.com/fourmia/Picture/main/20220722181722.png)
![20220722175204](https://raw.githubusercontent.com/fourmia/Picture/main/20220722175204.png)

### 低级语言和高级语言
低级与高级相对于计算机系统而言，越接近硬件越低级，在操作系统加载过程来看，在加载操作系统前，需s要经过主引导记录MBR, 这一部分需要使用汇编语言进行，因为需要与硬件直接打交道，汇编语言具有极大的灵活性，可以自由指定寄存器，及控制指令流,甚至可以将数据内容作为指令让cpu执行(可以，但没必要)；而高级语言目前是不支持修改寄存器的，在做一些硬件访问，中断调用，端口读写之类的就需要用到汇编语言。

同时根据查阅的资料对低级语言和高级语言速度上做一个说明：从CPU的角度来看，它只认识机器指令，最终要在cpu上运行，都是要转换成机器指令进行的，汇编更快的原因就是汇编最终生成的指令数更少，CPU不会执行一些无关指令而浪费时间，而对于C语言，编写起来更方便，因为C编译器在背后做了大量工作，编写完毕后C编译器还加入额外的代码进行支撑，此时C代码已经冗余，最终生成的机器指令也是冗余的，说到底都是方便为了降低人的工作，对于`python`也是如此，对底层的各种东西做了封装，让人更关注业务或者想要实现的功能本身。

###