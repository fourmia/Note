<!--
 * @Author: LiZedong <15516926476@163.com>
 * @Date: 2022-01-26 11:18:45
 * @LastEditors: LiZedong <15516926476@163.com>
 * @LastEditTime: 2022-01-26 12:16:58
 * @FilePath: \A个人笔记\work\天擎系统.md
-->
### 前言
此篇文档主要是对天擎系统使用过程中遇到的问题进行记录，主要分为**地面资料**和**数值模式**两大资料中**格点数据请求**记录，目前记录较为片面，且只针对某类数据进行测试，随着开发及测试的深入，文档会进一步更新完善。[代码地址](http://172.10.11.148/LiZedong/QhRegionalStation/blob/develop/data_resolution.py)，可使用`青海153`服务器上的`docker镜像`进行测试工作。

### 地面模式
> 地面模式中主要各类包含实况格点降水数据，一般提供按以下请求方式，有的资料仅包含文件同步接口
+ 文件同步

    + 按时间及时间段请求文件，主要是拿到文件地址,然后对该地址文件内容进行请求写入

+ 数据获取

    + 按时间、要素、（经纬度范围）请求数据，理想状态是直接获取到**数据数组、经纬度数组**，但在获取过程中发现，天擎系统列出了接口信息，但**不支持通过该方式进行获取**，同时经过少数资料验证，对于同一资料，通过文件请求方式可以获取到数据,但采用其提供的数据获取接口测试一般会报`-3001`错误。


### 数值模式
> 在使用过程中发现数值模式中既包含**实况数据获取**，也包含**预报数据获取**，为了降低问题复杂性，目前先不考虑数值模式中的实况数据获取。
+ 文件同步

    + 按时间及时间段请求文件，主要是拿到文件地址,然后对该地址文件内容进行请求写入

+ 数据获取

    + 按时间、要素、（经纬度范围）、等级、时效方式请求数据，以`NAFP_ECMF_C1D_GLB_FOR`资料为例，根据天擎系统提供的**获取二维数组**方式进行获取，出现异常，因此借鉴了`nmc_met_io`中获取方式，在前者获取不成功时，采用类`nmc_met_io`方式进行获取，发现能够获取成功。

+ 尚未解决问题

    + 由于`cma.music.DataQueryClient.callAPI_to_gridArray2D`封装程度较高，暂不考虑是包处理过程中的问题，同等参数，接口构造下一个异常一个成功，还未解决该问题。